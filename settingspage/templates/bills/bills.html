{% extends "settingspage/base.html" %}
{% load static %}

{% block bills%}
<div style="display: flex;">
<div style="position: fixed; align-items: center; justify-content: center; display: flex; flex-direction: column; z-index: 1000;" >
<label for="choices">Select Mode</label>
    <select id="choices" name="choices" style="height: 50px; width: 70px;">
        <option value="Waiting">Waiting</option>
        <option value="Accept">Accept</option>
        <option value="Decline">Decline</option>
        <option value="DeclineByUser">DeclineByUser</option>
        <option value="Timeout">Timeout</option>
    </select>
<button id="getDataButton" style="height: 50px; width: 50px;">Lọc</button>
</div>

<div class="container" style="margin-left: 20%;">

<ul>
    {% for bill in bills %}
        {% if bill.status == data_from_js %}
        <li>
            <i style="color: red; font-weight: bold; font-size: large;">{{bill.time}}</i>
            Khách hàng đã gửi yêu cầu xác nhận đơn hàng, ấn vào để xem chi tiết &#8681;
            <p style="font-weight: bold;">Status : 

                <i style="color:red">{{bill.status}}</i>
                <i>
                    {% if bill.status == "Accept" %}
                    &#10004;
                    {% elif bill.status == "Decline" %}
                    &#10006;
                    {% elif bill.status == "Waiting" %}
                    &#10227;
                    {% elif bill.status == "DeclineByUser" %}
                    <p style="color : red; font-weight: bold;">Khách hàng đã hủy đơn hàng</p>
                    {% elif bill.status == "Timeout" %}
                    <p style="color: red; font-weight: bold;">Đang chờ khách hàng thanh toán</p>
                    {% endif %}

                </i>
            </p>
            <a style="text-decoration: none;" href="{% url 'settingspage:viewBill' bill.id %}"><button>Details</button></a>
            
        </li>
        {% endif %}
        
        
    {% endfor %} 
</ul>
</div>
<script>
    defaultValue = "{{data_from_js}}";
    var dataSelector = document.getElementById('choices');
    var defaultOption = dataSelector.querySelector('option[value="' + defaultValue + '"]');
    if (defaultOption) {
        defaultOption.selected = true;
    }

    document.addEventListener('DOMContentLoaded', function() {
    var getDataButton = document.getElementById('getDataButton');

    getDataButton.addEventListener('click', function() {
        var dataFromJavaScript = document.getElementById('choices').value;
        window.location.href = window.location.pathname + '?selectedData=' + encodeURIComponent(dataFromJavaScript);
    });
});

</script>
</div>
{% endblock%}